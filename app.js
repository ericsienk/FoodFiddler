!function(a,b){"undefined"!=typeof module&&module.exports?module.exports=b(require("angular"),a):"function"==typeof define&&define.amd?define(["angular"],function(c){return b(c,a)}):b(a.angular,a)}(this,function(a,b,c){"use strict";function d(a){return a.complete&&(void 0===a.naturalWidth||0!==a.naturalWidth)}function e(a){return Array.prototype.slice.call(a)}var f={gridWidth:300,gutterSize:10,gridNo:"auto",direction:"ltor",refreshOnImgLoad:!0,cssGrid:!1,performantScroll:!1,pageSize:"auto",scrollContainer:"body",infiniteScrollDelay:3e3,infiniteScrollDistance:100},g=a.element,h=function(a){return a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},i={visibility:"hidden",opacity:0,top:0,left:0,width:""},j=function(){var a=g(b);return function(b){return a[0]=b,a}}();return g(document.head).append("<style>.ag-no-transition{-webkit-transition: none !important;transition: none !important;} .angular-grid{position : relative;} .angular-grid > *{opacity : 0} .angular-grid > .angular-grid-item{opacity : 1}</style>"),a.module("angularGrid",[]).directive("angularGrid",["$timeout","$window","$q","angularGridInstance",function(k,l,m,n){return{restrict:"A",scope:{model:"=angularGrid",dep_gridWidth:"=gridWidth",dep_gutterSize:"=gutterSize",dep_refreshOnImgLoad:"=refreshOnImgLoad",dep_direction:"=direction",dep_cssGrid:"=cssGrid",dep_options:"=angularGridOptions",dep_gridNo:"=gridNo",dep_agId:"@angularGridId",gridNo:"=agGridNo",gridWidth:"=agGridWidth",gutterSize:"=agGutterSize",refreshOnImgLoad:"=agRefreshOnImgLoad",direction:"=agDirection",cssGrid:"=agCssGrid",options:"=agOptions",agId:"@",pageSize:"=agPageSize",performantScroll:"=agPerformantScroll",scrollContainer:"@agScrollContainer",infiniteScroll:"&agInfiniteScroll",infiniteScrollDistance:"=agInfiniteScrollDistance",infiniteScrollDelay:"=agInfiniteScrollDelay"},link:function(o,p,q){function r(){P={},Object.keys(f).forEach(function(a){o[a]!==c?P[a]=o[a]:o["dep_"+a]!==c&&(P[a]=o["dep_"+a])}),P=a.extend({},f,P,o.options||o.dep_options),P.cssGrid&&(P.gutterSize=0),"auto"==P.pageSize&&(P.pageSize=b.offsetWidth>=768?2:3)}function s(a,b){b=b||document.body;var c=0,d=0;if(a.offsetParent)do{c+=a.offsetLeft,d+=a.offsetTop,a=a.offsetParent}while(a&&a!=b);return{left:c,top:d}}function t(){var a=g(document.querySelector(P.scrollContainer)),b=a[0],c="body"===P.scrollContainer?M:a;return{height:c[0].innerHeight||c[0].offsetHeight,scrollHeight:b.scrollHeight,startFrom:s(L,b).top,$elm:c}}function u(a,b,c){Q.pageInfo=[{from:0}];var d,e,f,g=P.pageSize,h=Q.scrollContInfo.height,i=h*g,j=Math.ceil(b/i),k=0;for(k=0;k<j;k++)for(var l=0,m=a.length;l<m;l++)if(d=a[l],e=k?i*k:0,f=i*(k+1),d.bottom<e||d.top>f){if(d.top>f)break}else Q.pageInfo[k]||(Q.pageInfo[k]={from:l}),Q.pageInfo[k].to=l;Q.pageInfo=Q.pageInfo.map(function(a,b){var c=Math.max(b-1,0),d=Math.min(b+1,Q.pageInfo.length-1);return{from:Q.pageInfo[c].from,to:Q.pageInfo[d].to}})}function v(a){var b,c,d,e;for(d=0,e=J.length;d<e;d++)c=j(J[d]),b=c.data(),b.$scope&&(c.data("_agOldWatchers",b.$scope.$$watchers),b.$scope.$$watchers=[]);for(d=0,e=a.length;d<e;d++)b=j(a[d]).data(),b.$scope&&(b.$scope.$$watchers=b._agOldWatchers||[],b.$scope.$digest())}function w(a){Q.lastScrollPosition=a;var b;if(!Q.isBusy){var c=0,d=P.pageSize;if(a>Q.scrollContInfo.startFrom+Q.scrollContInfo.height*d&&(c=Math.floor((a-Q.scrollContInfo.startFrom)/(Q.scrollContInfo.height*d))),c!=Q.lastPage){Q.lastPage=c;var e=Q.pageInfo[c];e&&(p.children().detach(),b=Array.prototype.slice.call(J,e.from,e.to+1),v(b),p.append(b))}}}function x(){clearTimeout(Q.infiniteScrollTimeout),Q.isLoading=!1}function y(a){if(!Q.isLoading&&o.model.length){a>=Q.scrollContInfo.scrollHeight-Q.scrollContInfo.height*(1+P.infiniteScrollDistance/100)&&(Q.isLoading=!0,o.infiniteScroll(),Q.infiniteScrollTimeout=setTimeout(x,P.infiniteScrollDelay))}}function z(){var a=this.scrollTop||this.scrollY;P.performantScroll&&w(a),o.infiniteScroll&&y(a)}function A(){var a,b=L.offsetWidth;if(P.cssGrid){a=g(J[0]).clone(),a.css(i).addClass("ag-no-transition ag-clone"),p.append(a);var c=a[0].offsetWidth;return a.remove(),{no:c?Math.floor((b+12)/c):0,width:c}}var d="auto"==P.gridNo?P.gridWidth:Math.floor(b/P.gridNo)-P.gutterSize,e="auto"==P.gridNo?Math.floor((b+P.gutterSize)/(d+P.gutterSize)):P.gridNo,f=(b+P.gutterSize)%(d+P.gutterSize);return d+=Math.floor(f/e),{no:e,width:d}}function B(b,c){var f=c.beforeLoad||a.noop,g=c.onLoad||a.noop,h=c.isLoaded||a.noop,i=c.onFullLoad||a.noop,j=c.ignoreCheck||a.noop,k=b.find("img"),l=[];e(k).forEach(function(a){a.src&&(f(a),d(a)||j(a)?h(a):l.push(m(function(b,c){a.onload=function(){g(a),b()},a.onerror=c})))}),l.length?m.all(l).then(i,i):setTimeout(function(){i()},0)}function C(){if(J&&J.length){O++;var b,c=A(),d=c.width,f=c.no;if(f){var h=[];for(b=0;b<f;b++)h.push(0);e(J).forEach(function(a){var b=j(a);e(b.find("img")).forEach(function(a){var c=g(a);if(c.hasClass("img-loaded"))return void c.css("height","");b.addClass("ag-no-transition"),b.css("width",d+"px");var e=c.attr("actual-width")||c.attr("data-actual-width"),f=c.attr("actual-height")||c.attr("data-actual-height");e&&f&&c.css("height",f*a.width/e+"px")}),b.removeClass("ag-no-transition")});var k=J.clone();k.addClass("ag-no-transition ag-clone");var l=a.extend({},i);l.width=d+"px",k.css(l),p.append(k),function(a){B(k,{ignoreCheck:function(a){return!j(a).hasClass("img-loaded")},onFullLoad:function(){if(a<O)return void k.remove();var b,c,e,g=[],i=[];for(c=0,e=k.length;c<e;c++)g.push(k[c].offsetHeight);for(c=0,e=J.length;c<e;c++){b=j(J[c]);var l=g[c],m=Math.min.apply(Math,h),n=h.indexOf(m);h[n]=m+l+P.gutterSize;var q=n*(d+P.gutterSize),r={position:"absolute",top:m+"px"};"rtol"==P.direction?r.right=q+"px":r.left=q+"px",r.width=d+"px",i.push({top:m,bottom:m+l}),b.css(r).addClass("angular-grid-item")}var s=Math.max.apply(Math,h);p.css("height",s+"px"),k.remove(),(P.performantScroll||o.infiniteScroll)&&(Q.scrollContInfo=t()),P.performantScroll&&(Q.lastPage=null,u(i,s,f),Q.isBusy=!1,w(Q.lastScrollPosition||0)),x()}})}(O)}}}function D(){var a=!1;e(J).forEach(function(b){var c=g(b);c.find("img").length&&(c.addClass("img-loading"),B(c,{beforeLoad:function(a){j(a).addClass("img-loading")},isLoaded:function(a){j(a).removeClass("img-loading").addClass("img-loaded")},onLoad:function(b){!a&&P.refreshOnImgLoad&&(a=!0,k(function(){C(),a=!1},100)),j(b).removeClass("img-loading").addClass("img-loaded")},onFullLoad:function(){c.removeClass("img-loading").addClass("img-loaded")}}))})}function E(){return g(e(p.children()).filter(function(a){return!j(a).hasClass("ag-clone")}))}function F(){var a=e(J).filter(function(a){return j(a).hasClass("ng-leave")});return m(function(b){a.length?j(a[0]).one("webkitTransitionEnd transitionend msTransitionEnd oTransitionEnd",function(){k(function(){J=E(),b()})}):b()})}function G(){Q.isBusy=!0,k(function(){J=E(),F().then(function(){D(),k(function(){C()})})})}function H(){r(),J&&C()}function I(){Q.isBusy=!0;var a=L.offsetWidth;R!=a&&(R=a,K&&k.cancel(K),K=k(function(){P.performantScroll&&(p.children().detach(),p.append(J)),C()},100))}var J,K,L=p[0],M=g(l),N=o.agId||o.dep_agId,O=0;p.addClass("angular-grid");var P;["gridWidth","gutterSize","refreshOnImgLoad","direction","options","cssGrid","gridNo","agId"].forEach(function(a){var b=h(a),d="ag-"+h(a);"options"==a&&(b="angular-grid-options"),"agId"==a&&(b="angular-grid-id",d="ag-id"),o["dep_"+a]!==c&&console&&console.warn&&console.warn(b+" is deprecated. Use "+d+" instead in template.")}),r();var Q={};setTimeout(function(){Q.scrollContInfo=t(),Q.scrollContInfo.$elm.on("scroll",z)},0),o.$watch("model",G,!0),o.$watch("options",H,!0),Object.keys(f).forEach(function(a){o[a]!==c&&o.$watch(a,H)});var R=L.offsetWidth;M.on("resize",I),N&&(n[N]={refresh:function(){G()},handleScroll:function(a){P.performantScroll&&w(a),o.infiniteScroll&&y(a)}}),o.$on("$destroy",function(){N&&delete n[N],M.off("resize",I),clearTimeout(Q.infiniteScrollTimeout),Q.scrollContInfo&&Q.scrollContInfo.$elm.off("scroll",z)})}}}]).factory("angularGridInstance",function(){return{}}).name}),function(a){"use strict";a.module("foodfiddler.directive.ffAutosuggest",[]).directive("ffAutosuggest",["$window","$document","$filter","$timeout",function(b,c,d,e){return{restrict:"AE",scope:{onSearch:"&",onSelect:"&",onEmpty:"&",width:"@",triggerLength:"@",name:"@",searchTerm:"=?",required:"=?",placeholder:"@",emptyOnBlur:"@"},transclude:!0,replace:!1,templateUrl:"common/directives/autosuggest/ff-autosuggest.html",link:function(c,f,g){var h,i=-1,j=isNaN(c.triggerLength)?0:parseInt(c.triggerLength);c.LOADING=!1;var k=function(){return!j||a.isDefined(c.searchTerm)&&c.searchTerm.length>=j};c.select=function(a){c.onSelect instanceof Function&&(c.searchTerm=c.onSelect({item:a}),h=c.searchTerm),c.blur()},c.search=function(a){i=-1,k()?(c.SHOW=!0,c.LOADING=!0,c.onSearch({searchTerm:c.searchTerm}).then(function(a){c.LOADING=!1,c.list=a.data,c.filteredList=d("filter")(c.list,c.searchTerm)})):(c.SHOW=!1,c.list=[],c.filteredList=d("filter")(c.list,c.searchTerm))},c.focus=function(){e(l);var a=c.searchTerm?c.searchTerm.length:0;c.SHOW=c.triggerLength<=a},c.blur=function(){c.SHOW=!1,i=-1,c.emptyOnBlur&&h!=c.searchTerm&&(c.searchTerm=h="",c.onEmpty instanceof Function&&c.onEmpty({}))};var l=function(){var a=f.find(".ffAutosuggestWrapper"),c=a.offset().top-(b.scrollY||b.pageYOffset);a.css({maxHeight:b.innerHeight-c-9})},m={38:function(a){i>0&&(i--,a(i+1,i))},40:function(a){i<c.filteredList.length-1&&(i++,a(i-1,i))},13:function(){i>-1&&e(function(){c.select(c.filteredList[i])})}};a.element(b).on("load resize scroll",l),f.on("keydown",function(a){c.SHOW&&m[a.keyCode]&&m[a.keyCode](function(a,b){f.find("li:eq("+a+")").removeClass("item-selected");var c=f.find("li:eq("+b+")"),d=f.find(".ffAutosuggestWrapper"),e=c.position().top+c.outerHeight(!0);d.scrollTop()>=c.position().top?d.scrollTop(c.position().top):e>=d.height()+d.scrollTop()&&d.scrollTop(d.scrollTop()+(e-(d.height()+d.scrollTop()))),c.addClass("item-selected")})}),e(function(){c.search(!0),c.SHOW=!1,c.$$postDigest(l)})}}}]).directive("autoTransclude",function(){return{compile:function(a,b,c){return function(a,b){c(a.$new(),function(a){b.append(a)})}}}})}(angular),function(a){"use strict";a.module("foodfiddler.directive.ffIcon",[]).directive("ffIcon",function(){return{restrict:"E",replace:!1,scope:{icon:"=",color:"="},template:'<div class="displayInlineBlock icon icon-{{icon}} font-{{color}}"></div>'}})}(angular),function(a){"use strict";a.module("foodfiddler.directive.imgurLoader",[]).directive("imgurLoader",["$timeout","lazyLoaderService",function(b,c){return{restrict:"A",link:function(b,d,e){function f(a){return e.imgurLoader.indexOf("i.imgur.com")>-1?e.max?a:a.replace(/(.+)(\.\w{3}$)/,"$1l$2"):a}function g(b){b=f(b),i=a.element(new Image),i.attr("src",b),i.on("load",function(){j||(d[0].style.transition=".5s filter"),d[0].style.background='url("'+b+'") '+(e.options?e.options:"no-repeat center"),d[0].style.backgroundSize="cover",d[0].style.filter="",j||d.removeAttr("imgur-loader")}).on("error",function(){d[0].style.filter="",j?d[0].style.background="":d.removeAttr("imgur-loader")}),i[0].complete||(d[0].style.filter="blur(22px)")}function h(){k?c.unsubscribe(d[0],"imgurLoader"):k=!0,c.subscribe(d[0],"imgurLoader",function(a){c.unsubscribe(d[0],"imgurLoader"),g(e.imgurLoader)})}var i,j=!1,k=!1;b.$on("$destroy",function(){c.unsubscribe(d[0],"imgurLoader")}),"true"===e.autoWatch?(j=!0,b.$watch(function(){return e.imgurLoader},h)):h()}}}])}(angular),function(a){"use strict";a.module("foodfiddler.directive.ingredientList",[]).directive("ingredientList",[function(){return{restrict:"E",scope:{ingredients:"=",color:"="},templateUrl:"common/directives/ingredient-list/ingredient-list.html",link:function(a){a.fab=!0,a.toggleFab=function(){a.fab=!a.fab}}}}])}(angular),function(a){"use strict";a.module("foodfiddler.directive.ingredientPicker",[]).directive("ingredientPicker",["$log","$timeout","httpUtil",function(b,c,d){return{restrict:"AE",scope:{controls:"=",ingredients:"="},replace:!0,templateUrl:"common/directives/ingredient-picker/ingredient-picker.html",link:function(b,e,f){b.controls.open=function(a){b.selectedIngredient=a,b.currentIngredient={},b.currentIngredient.tag=b.selectedIngredient.ingredientTag,c(function(){$("#ingredientPicker").modal("show"),c(function(){e.find("input")[0].focus()},600)})},b.controls.cancel=function(){c(function(){$("#ingredientPicker").modal("hide")},100)},b.search=function(a){return d.mockPromise(b.ingredients)},b.select=function(c){b.currentIngredient=a.copy(c)},b.controls.choose=function(){b.selectedIngredient.ingredientTag=b.currentIngredient.tag,b.controls.cancel()}}}}])}(angular),function(a){"use strict";a.module("foodfiddler.directive.recipeList",[]).directive("recipeList",["$log","ffRecipeService","$location","$filter",function(a,b,c,d){return{restrict:"AE",scope:{recipes:"=",searchText:"=",authorizedFunction:"="},replace:!0,templateUrl:"common/directives/recipe-list/recipe-list.html"}}])}(angular),function(a){"use strict";a.module("foodfiddler.directive.recipePreview",[]).directive("recipePreview",[function(){return{restrict:"AE",scope:{recipe:"="},templateUrl:"common/directives/recipe-preview/recipe-preview.html"}}])}(angular),function(){"use strict";angular.module("ff-number.filter",[]).filter("ffNumber",["$filter",function(a){return function(b,c){return void 0===b||isNaN(b)?void 0!==c&&c?"0.00":"-":a("number")(b,2)}}])}(),function(){"use strict";angular.module("ff-title-case.filter",[]).filter("ffTitleCase",function(){return function(a){return a=a||"",a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})}})}(),function(){"use strict";angular.module("foodfiddler.ff-filters",["ff-number.filter","ff-title-case.filter"])}(),function(a){"use strict";a.module("foodfiddler.service.auth",[]).factory("auth",["$rootScope","$location",function(a,b){var c={onReject:function(){b.path("/home")}};return{authorizePage:function(b,d){return a.authorized()?(d instanceof Function&&d(),!0):(b instanceof Function?b():c.onReject(),!1)}}}])}(angular),function(a){"use strict";a.module("foodfiddler.service.httpUtil",[]).factory("httpUtil",["$timeout","$q",function(b,c){function d(a){return firebase.database().ref().child(a).push().key}function e(){return{callStack:{},callbackStack:[],onExecute:function(a){return this.callbackStack.push(a),this},mergeBatch:function(b){return a.extend(this.callStack,b.callStack),this.callbackStack=this.callbackStack.concat(b.callbackStack),this},create:function(b,c){var e=a.copy(c),f=d(b);return c.id=f,this.callStack[b+f]=e,this},update:function(a,b){return this.callStack[a]=b,this},delete:function(a){return this.callStack[a]=null,this},execute:function(){var a=this;return l(firebase.database().ref().update(a.callStack)).then(function(b){a.callbackStack.forEach(function(a){a(b)})})}}}function f(a,b,c){return l(firebase.database().ref(a+c.id).remove()).then(function(){return b&&b.remove(c),{data:!0}})}function g(a,b,c){var e=d(a),f={};return f[a+e]=c,c.id=e,l(firebase.database().ref().update(f)).then(function(){return b&&b.merge(c),{data:c}})}function h(b,c,d){var e=a.copy(d);delete e.id;var f={};return f[b+d.id]=e,l(firebase.database().ref().update(f)).then(function(){return c&&c.merge(d),{data:d}})}function i(a,b,c){a.then(function(a){return b[c]=a.data,a})}function j(a,b){return b.initialized?m(b.getList(function(c,d,e){i(k(a,b,c),d,e)})):l(firebase.database().ref(a).once("value")).then(function(a){return b.initialize(a.data),m(b.getList())})}function k(b,c,d){var e=c.get(d);return a.isDefined(e)?m(e):l(firebase.database().ref(b+d).once("value")).then(function(a){return a.data.id=d,c.merge(a.data),{data:a.data}})}function l(a){var d=c.defer();return a.then(function(a){b(function(){var b={data:{}};a&&a.val instanceof Function&&(b.data=a.val()),d.resolve(b)})}),d.promise}function m(b,d){var e=c.defer();return e.resolve({data:d?a.copy(b):b}),e.promise}return{mockPromise:m,firebaseBatch:e,firebaseGet:j,optimisticGet:i,firebaseGetById:k,firebaseCreate:g,firebaseUpdate:h,firebaseDelete:f}}])}(angular),function(a){"use strict";a.module("foodfiddler.service.lazyLoaderService",[]).factory("lazyLoaderService",[function(){function a(a,b){return{element:a,observer:new IntersectionObserver(function(a){a[0].isIntersecting&&b(a[0])})}}var b={};return{subscribe:function(c,d,e){var f=b[d];f?f.push(a(c,e)):(f=[a(c,e)],b[d]=f),f[f.length-1].observer.observe(c)},unsubscribe:function(a,c){var d=b[c];d&&(b[c]=d.filter(function(b){return b.observer.unobserve(a),b.element!==a}))}}}])}(angular),function(a){"use strict";a.module("foodfiddler.service.recipes",[]).factory("ffRecipeService",["$http","$q","util","httpUtil","ffTagsService",function(b,c,d,e,f){function g(){return e.firebaseGet(s,r)}function h(b){return e.firebaseGetById(s,r,b).then(function(b){return b.data.tags=b.data.tags||{},a.forEach(b.data.tags,function(a,c){"object"!=typeof a&&(b.data.tags[c]={id:a},e.optimisticGet(f.getRecipeTag(c),b.data.tags,c))}),b})}function i(b){var c=a.copy(b),d={};return c.tags=c.tags||{},a.forEach(c.tags,function(a,b){d[b]="object"==typeof a||a}),c.tags=d,c}function j(a){var b=i(a),c=r.diff(b,a.id,"tags");return e.firebaseBatch().create(s,b).mergeBatch(f.getTagRecipesBatch(b.id,c)).execute().then(function(){return r.merge(b),b})}function k(a){a.tags={"-Lbimir6S6MCjXEdEObd":!0};var b=i(a),c=r.diff(b,a.id,"tags");return e.firebaseBatch().update(s+a.id,b).mergeBatch(f.getTagRecipesBatch(a.id,c)).execute().then(function(){return r.merge(a),a})}function l(a){var b=i(a);b.tags={};var c=r.diff(b,a.id,"tags");return e.firebaseBatch().delete(s+a.id,b).mergeBatch(f.getTagRecipesBatch(a.id,c)).execute().then(function(){return r.remove(a),a})}function m(){return b.get("common/data/ingredients.json?rel=ad63c15272")}function n(a){var b=a.replace(/\scups?|tbsp|\slbs?|tsp|gallons?|\d+\/?\d?|,|\(|\)|inch|inches|medium|large|small|\sof\s|\sin\s|\sif\s|\sor\s/g,""),c=["SPOON","SOUR_CRM","SHORT","POW_SUGAR"],e={tag:c[Math.floor(Math.random()*c.length)],rating:b.length/2,inThere:!1};if(!q)return e.tag;for(var f=0;f<q.length;f++){var g=d.howFuzzyWasHe(b,q[f].name),h=d.areYouInMyString(q[f].name,b),i=g+h/30*-1;i<e.rating&&(e={tag:q[f].tag,rating:i})}return e.tag}function o(a){return f.getTagById(a).then(function(a){return c.all(Object.keys(a.data.recipes).map(function(a){return h(a)})).then(function(a){return a.map(function(a){return a.data})})})}function p(){return g().then(function(a){return a.data.reverse()})}var q,r=d.getHashIndexer(),s="foodfiddler/recipes/";return{getRecipes:g,getRecipeById:h,createRecipe:j,saveRecipe:k,deleteRecipe:l,getIngredients:m,guessIngredientIconTag:n,getRecipesByTag:o,getRecentRecipes:p}}])}(angular),function(a){"use strict";a.module("foodfiddler.service.tags",[]).factory("ffTagsService",["httpUtil","util",function(b,c){var d=c.getHashIndexer(),e="foodfiddler/tags/";return{CONSTANTS:{DESSERT:"-LbimheT8m4W5cqVcFnC",MEAL:"-Lbimir6S6MCjXEdEObd"},normalizeTag:function(a){var b={};return a.recipes=a.recipes||b,a.recipes instanceof Array&&a.recipes.forEach(function(a){a.id&&(b[a.id]=!0)}),a.recipes=b,a},getTags:function(){return b.firebaseGet(e,d)},getTagById:function(a){return b.firebaseGetById(e,d,a)},getRecipeTag:function(a){return b.firebaseGetById(e,d,a).then(function(a){return delete a.data.recipes,a})},getTagRecipesBatch:function(a,c){var f=b.firebaseBatch();return c.updates.forEach(function(b){f.update(e+b.key+"/recipes/"+a,!0),f.onExecute(function(){d.stale(b.key)})}),c.deletes.forEach(function(b){f.delete(e+b.key+"/recipes/"+a),f.onExecute(function(){d.stale(b.key)})}),f},createTag:function(a){return this.normalizeTag(a),b.firebaseCreate(e,d,a)},updateTag:function(a){return b.firebaseUpdate(e,d,a)},deleteTag:function(c){return b.firebaseDelete(e,d,c).then(function(){var d=b.firebaseBatch();return a.forEach(c.recipes,function(a,b){d.delete("foodfiddler/recipes/"+b+"/tags/",null,c.id)}),d.execute()})}}}])}(angular),function(a){"use strict";a.module("foodfiddler.service.util",[]).factory("util",[function(){function b(a,b){return b.split(".").reduce(function(a,b){return a[b]},a)}function c(b,c){var d;return b instanceof Array?(d={},b.forEach(function(a){d[a]=a})):d=c?a.copy(b):b,d}return{decodeNewLines:function(a){return a?a.replace(/(\r\n|\n|\r)/gm,"<br />"):a},encodeLineBreaks:function(a){return a?a.replace("<br />","\r"):a},validateForm:function(b){b.$invalid&&a.forEach(b.$error,function(b){a.forEach(b,function(a){a.$setTouched instanceof Function&&a.$setTouched()})})},hasErrorClass:function(a,b,c){if(b&&b[a]){c=c||"has-error";var d={};return d[c]=b[a].$touched&&b[a].$invalid,d}},howFuzzyWasHe:function(a,b){if(0==a.length)return b.length;if(0==b.length)return a.length;var c,d=[];for(c=0;c<=b.length;c++)d[c]=[c];var e;for(e=0;e<=a.length;e++)d[0][e]=e;for(c=1;c<=b.length;c++)for(e=1;e<=a.length;e++)b.charAt(c-1)==a.charAt(e-1)?d[c][e]=d[c-1][e-1]:d[c][e]=Math.min(d[c-1][e-1]+1,Math.min(d[c][e-1]+1,d[c-1][e]+1));return d[b.length][a.length]},areYouInMyString:function(a,b){for(var c=a.toLowerCase().split(" "),d=b.toLowerCase(),e=0,f=0;f<c.length;f++)d.indexOf(c[f])>-1&&(e+=100/c.length);return e},arrayFromMap:function(a,b){return Object.keys(a).map(function(c){var d;return b?(d={},d[b]=c):d=a[c],d})},getHashIndexer:function(){return{indexer:{},staleIndexer:{},initialized:!1,initialize:function(b){var c=this;this.indexer={},this.staleIndexer={},a.forEach(b,function(b,d){var e=a.copy(b);e.id=d,c.indexer[d]=e}),this.initialized=!0},exists:function(b){return a.isDefined(this.indexer[b])},stale:function(b){this.exists(b)&&(this.staleIndexer[b]=a.copy(this.indexer[b]),delete this.indexer[b])},get:function(b){if(this.exists(b))return a.copy(this.indexer[b])},getList:function(b){var c=a.copy(Object.values(this.indexer));return b instanceof Function&&Object.keys(this.staleIndexer).forEach(function(a){var d={id:a.id};c.push({id:a.id}),b(d,c,c.length-1)}),c},remove:function(b){this.exists(b.id)?delete this.indexer[b.id]:a.isDefined(this.staleIndexer[b.id])&&delete this.indexer[b.id]},merge:function(b){this.staleIndexer[b.id]&&delete this.staleIndexer[b.id],this.indexer[b.id]=a.copy(b)},diff:function(d,e,f){var g=b(d,f),h={deletes:[],updates:[]},i=c(g,!0),j=this.get(e);return j&&a.forEach(c(b(j,f)),function(b,c){a.isDefined(i[c])?(b!=i[c]&&h.updates.push({key:c,value:b}),delete i[c]):h.deletes.push({key:c,value:b})}),a.forEach(i,function(a,b){h.updates.push({key:b,value:a})}),h}}}}}])}(angular),angular.module("foodfiddler.edit",["ngRoute"]).config(["$routeProvider",function(a){a.when("/add",{templateUrl:"edit/edit-recipe.html",controller:"editCtrl",tabName:"add",editMode:!0}).when("/:recipeId/edit",{templateUrl:"edit/edit-recipe.html",controller:"editCtrl",tabName:"home",editMode:!0})}]).controller("editCtrl",["$scope","$rootScope","$location","$timeout","ffRecipeService","$routeParams","HEX_COLORS","util","httpUtil",function(a,b,c,d,e,f,g,h,i){function j(b){angular.forEach(b,function(b){var c=b.match(/^(\S+? \S+?) ([\s\S]+?)$/),d=c[2].replace(/\n|\r/g,"");a.recipe.ingredients.push({amount:c[1],name:d,ingredientTag:e.guessIngredientIconTag(d)})})}a.isEdit=!1,a.recipe={ingredients:[],color:"green"},a.loaders={page:!0,sum:0,max:2},a.hexColors=g,a.colors=h.arrayFromMap(g,"name"),a.forms={},a.radioFunction="move",a.picker={},a.selectedIngredient={ingredientTag:"SPOON"},a.recipeUtil={};var k;a.hasError=function(b,c,d){return h.hasErrorClass(b,a.forms[c],d)},a.paste=function(a){j((a.clipboardData||window.clipboardData||a.originalEvent.clipboardData).getData("text").split("\n"))},a.ingredientActions={search:function(b){return i.mockPromise(a.ingredients)},select:function(b){a.selectedIngredient.ingredientTag=b.tag,a.selectedIngredient.name=b.name},add:function(){a.selectedIngredient&&a.ingredientActions.isValid(a.selectedIngredient)&&a.recipe.ingredients.push({amount:a.selectedIngredient.amount,name:a.selectedIngredient.name,ingredientTag:a.selectedIngredient.ingredientTag})},isValid:function(b){return h.validateForm(a.forms.ingredients),b.amount&&b.name&&b.ingredientTag},remove:function(b){for(var c=0;c<a.recipe.ingredients.length;c++)if(b===a.recipe.ingredients[c]){a.recipe.ingredients.splice(c,1);break}},move:function(b,c){if(c>=0&&c<a.recipe.ingredients.length){var d=angular.copy(a.recipe.ingredients[b]);a.recipe.ingredients[b]=angular.copy(a.recipe.ingredients[c]),a.recipe.ingredients[c]=d}}},a.recipeActions={submit:function(){a.recipeActions.isValid(a.recipe)&&(b.authorized()?f.recipeId?a.recipeActions.save():a.recipeActions.create():alert("Log back in!"))},isValid:function(b){h.validateForm(a.forms.recipe);var c=b.title&&b.method&&b.prep&&b.minutes&&b.serves&&b.ingredients instanceof Array&&b.instructions;if(c){for(var d=0;d<b.ingredients.length;d++)c=c&&a.ingredientActions.isValid(b.ingredients[d]);return c}return c},onResponse:function(a){d(function(){$(".modal-backdrop.fade.show").remove(),$("body").removeClass("modal-open"),$("body").css("padding",0);var b=k>=0?"/recipe/"+a.id:"/home";c.path(b)})},delete:function(){k=-1,e.deleteRecipe(a.recipe).then(a.recipeActions.onResponse)},save:function(){k=0,e.saveRecipe(a.recipe).then(a.recipeActions.onResponse)},create:function(){k=1,e.createRecipe(a.recipe).then(a.recipeActions.onResponse)}},a.selectColor=function(b){a.recipe.color=b},a.showChickenMessage=function(){d(function(){$("#chickenModal").modal("show")})};var l=function(){++a.loaders.sum===a.loaders.max&&(a.loaders.page=!1,a.loaders.sum=0)},m=function(){e.getIngredients().then(function(b){a.ingredients=b.data,l()})},n=function(){f.recipeId?(a.isEdit=!0,e.getRecipeById(f.recipeId).then(function(b){var c=b.data;c.instructions=h.encodeLineBreaks(c.instructions),c.ingredients instanceof Array||(c.ingredients=[]),a.recipe=c,a.recipe.id=f.recipeId,l()})):l()};!function(){b.authorized()?(n(),m()):f.recipeId?c.path("/recipe/"+f.recipeId):c.path("/home")}()}]),function(a){var b=["ngRoute","ngSanitize","foodfiddler.ff-filters","foodfiddler.service.recipes","foodfiddler.directive.ingredientPicker","foodfiddler.directive.recipeList","foodfiddler.home","foodfiddler.recipe","foodfiddler.edit","foodfiddler.directive.imgurLoader","foodfiddler.directive.ffAutosuggest","foodfiddler.directive.recipePreview","foodfiddler.directive.ffIcon","foodfiddler.directive.ingredientList","foodfiddler.directive.settings","foodfiddler.service.util","foodfiddler.service.httpUtil","foodfiddler.service.lazyLoaderService","foodfiddler.service.auth","foodfiddler.service.tags","foodfiddler.directive.tags","angularGrid"];b.push("templates-dist");var c=a.module("foodfiddler",b);c.config(["$routeProvider",function(a){a.when("/settings/",{template:"<ff-settings></ff-settings>"}).otherwise({redirectTo:"/home"})}]).constant("HEX_COLORS",{green:"#CAE0C7",purple:"#CBC7DF",yellow:"#EDBC5E",pink:"#E2C7D2"}),c.controller("FoodFiddlerCtrl",["$scope","$rootScope","ffRecipeService","$route","$location",function(a,b,c,d,e){var f=null;firebase.auth().onAuthStateChanged(function(a){f=a,g(a)}),a.isSelected=function(a){return d.current&&d.current.$$route&&d.current.$$route.tabName==a},b.authorized=function(){return a.isAdmin()},a.isAdmin=function(){return!(!b.user||!b.user.loggedIn)&&(void 0!==b.user.admin?b.user.admin:void firebase.database().ref("/logger").set({date:new Date}).then(function(c){a.$apply(function(){b.user.admin=!0})},function(c){a.$apply(function(){b.user.admin=!1})}))};var g=function(a,c){if(a||c)c?(b.user={},b.user.displayName="Account",b.user.loggedIn=!1):(b.user.displayName=a.displayName,b.user.loggedIn=!0);else try{return b.user=firebase.auth().currentUser||f,b.user.loggedIn=!0,void 0!==b.user.displayName}catch(a){return b.user={},b.user.displayName="Account",b.user.loggedIn=!1,!1}};g();var h=function(){var b=new firebase.auth.GoogleAuthProvider;firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL).then(function(){firebase.auth().signInWithPopup(b).then(function(b){a.$apply(function(){var a=(b.credential.accessToken,b.user);g(a)})}).catch(function(a){})}).catch(function(a){})},i=function(){firebase.auth().signOut().then(function(){a.$apply(function(){g(void 0,!0)})},function(a){})};a.decideAction=function(){b.user.loggedIn?i():h()},a.search=function(){return c.getRecipes()},a.select=function(a){e.path("recipe/"+a.id)}}])}(window.angular),angular.module("foodfiddler.home",["ngRoute"]).config(["$routeProvider",function(a){a.when("/home",{templateUrl:"home/home.html",controller:"homeCtrl",tabName:"home"})}]).controller("homeCtrl",["$scope","ffRecipeService","ffTagsService",function(a,b,c){function d(b){a.filteredRecipes=b,a.loaders.page=!1}a.loaders={page:!0},a.getRecipes=function(e){a.loaders.page=!0,a.selected=e,a.filteredRecipes=[],"Recent"===e?b.getRecentRecipes().then(d):"Desserts"===e?b.getRecipesByTag(c.CONSTANTS.DESSERT).then(d):"Meals"===e&&b.getRecipesByTag(c.CONSTANTS.MEAL).then(d)},function(){a.getRecipes("Recent")}()}]),angular.module("foodfiddler.recipe",["ngRoute"]).config(["$routeProvider",function(a){a.when("/recipe/:recipeId",{templateUrl:"recipes/recipe.html",controller:"recipeCtrl",tabName:"home"})}]).controller("recipeCtrl",["$scope","ffRecipeService","$routeParams","util","$rootScope","$location",function(a,b,c,d,e,f){this.currentNavItem="recipe",b.getRecipeById(c.recipeId).then(function(b){var c=b.data;c.instructions=d.decodeNewLines(c.instructions),a.recipe=c}),a.editRecipe=function(){f.url("/"+c.recipeId+"/edit")}}]),function(a){"use strict";a.module("foodfiddler.directive.settings",[]).directive("ffSettings",[function(){return{restrict:"E",templateUrl:"settings/settings.html",controller:["$scope","auth",function(a,b){var c={selectedTab:"tags"};a.select=function(a){c.selectedTab=a},a.isSelected=function(a){return c.selectedTab===a},function(){b.authorizePage()}()}]}}])}(angular),function(a){"use strict";a.module("foodfiddler.directive.tags",[]).directive("ffTags",[function(){return{restrict:"E",templateUrl:"settings/tags/tags.html",controller:["$scope","ffTagsService","$timeout",function(a,b,c){function d(){a.controls.alertType="success",a.controls.alertText="Success!",c(function(){a.controls.alertType="light",a.controls.alertText=" "},1e3)}function e(c){a.controls.newTag={},c&&c.data&&d(),b.getTags().then(function(b){a.tags=b.data})}a.controls={},a.createTag=function(a){b.createTag(a).then(e)},a.deleteTag=function(a){confirm("Delete tag: "+a.name+"?")&&b.deleteTag(a).then(e)},a.updateTag=function(a){b.updateTag(a).then(e)},e()}]}}])}(angular),angular.module("templates-dist",["common/directives/autosuggest/ff-autosuggest.html","common/directives/ingredient-list/ingredient-list.html","common/directives/ingredient-picker/ingredient-picker.html","common/directives/recipe-list/recipe-list.html","common/directives/recipe-preview/recipe-preview.html","edit/edit-recipe.html","home/home.html","index.html","recipes/recipe.html","settings/settings.html","settings/tags/tags.html"]),angular.module("common/directives/autosuggest/ff-autosuggest.html",[]).run(["$templateCache",function(a){a.put("common/directives/autosuggest/ff-autosuggest.html",'<div>\n    <input class="form-control"\n           ng-style="::{width : width}"\n           name="{{::name}}" placeholder="{{::placeholder}}" onclick="this.select()"\n           ng-focus="focus()" ng-blur="blur()" ng-change="search()" ng-required="required"\n           ng-model="searchTerm" />\n    <div class="ffAutosuggestWrapper">\n        <ul class="ffAutosuggestContainer" data-ng-if="SHOW">\n            <li class="ffAutosuggestItem" data-ng-repeat="item in filteredList track by $index | limitTo: 50" data-ng-mousedown="select(item)">\n                <div auto-transclude></div>\n            </li>\n            <li class="ffAutosuggestItem" data-ng-if="!filteredList.length && !LOADING">No results</li>\n        </ul>\n    </div>\n</div>')}]),angular.module("common/directives/ingredient-list/ingredient-list.html",[]).run(["$templateCache",function(a){a.put("common/directives/ingredient-list/ingredient-list.html",'<div class="item-container {{\'back-\' + color }}"  ng-class="{\'item-button\' : fab, \'item-list-wrapper\': !fab}">\n    <div class="fab-toggle row" ng-click="toggleFab()">\n        <div class="col-8 textAlignRight">Ingredients</div>\n        <div class="col-4 textAlignLeft">\n            <i style="margin-top:4px" class="fa glyphicon" ng-class="{\'fa-angle-up\' : fab, \'fa-angle-down\' : !fab }"></i>\n        </div>\n    </div>\n    <div class="item-list">\n        <div class="row recipe-list" ng-repeat="i in ingredients track by $index">\n            <div class="col-8 textAlignRight">\n                <p class="margin0px bold">{{i.amount}}</p>\n                <p>{{i.name}}</p>\n            </div>\n            <div class="col-4">\n                <ff-icon icon="i.ingredientTag" class="md-icon"></ff-icon>\n            </div>\n        </div>\n    </div>\n</div>')}]),angular.module("common/directives/ingredient-picker/ingredient-picker.html",[]).run(["$templateCache",function(a){a.put("common/directives/ingredient-picker/ingredient-picker.html",'<div class="modal fade" id="ingredientPicker" role="dialog">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <h5 class="modal-title" id="exampleModalLabel">Pick Ingredient</h5>\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                    <span aria-hidden="true">&times;</span>\n                </button>\n            </div>\n            <div class="modal-body">\n                <div class="container">\n                    <div class="row">\n                        <div class="col-4">\n                            <ff-icon class="textAlignCenter form-control md-icon"\n                                     icon="currentIngredient.tag">\n                            </ff-icon>\n                        </div>\n                        <div class="col-8">\n                            <ff-autosuggest trigger-length="0"\n                                            placeholder="search..."\n                                            search-term="currentIngredient.name"\n                                            on-select="select(item)"\n                                            on-search="search(searchTerm)">\n                                <ff-icon icon="item.tag" class="sm-icon"></ff-icon>&nbsp;\n                                <div class="displayInlineBlock">{{item.name}}</div>\n                            </ff-autosuggest>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="modal-footer textAlignLeft">\n                <button type="button" class="btn pull-right" data-ng-click="controls.choose()">\n                    Choose\n                </button>\n            </div>\n        </div>\n    </div>\n</div>')}]),angular.module("common/directives/recipe-list/recipe-list.html",[]).run(["$templateCache",function(a){a.put("common/directives/recipe-list/recipe-list.html",'<div>\n    <ul class="dynamic-grid" angular-grid="recipes" ag-grid-width="273" ag-gutter-size="30" ag-angular-grid-id="gallery">\n        <li style="transition:none !important; list-style:none;" ng-repeat="recipe in recipes track by recipe.id">\n            <div recipe-preview recipe="recipe"></div>\n        </li>\n    </ul>\n</div>')}]),angular.module("common/directives/recipe-preview/recipe-preview.html",[]).run(["$templateCache",function(a){a.put("common/directives/recipe-preview/recipe-preview.html",'<div class="recipe-preview back-{{recipe.color}}">\n    <div class="recipe-preview-thumbnail" imgur-loader="{{recipe.url}}"></div>\n    <div class="recipe-preview-title">{{recipe.title}}</div>\n    <div class="recipe-preview-options"></div>\n    <a class="recipe-preview-link" href="#/recipe/{{recipe.id}}"></a>\n</div>\n')}]),angular.module("edit/edit-recipe.html",[]).run(["$templateCache",function(a){a.put("edit/edit-recipe.html",'<form name="forms.recipe" novalidate>\n    <div data-ng-if="loaders.page">\n        <div class="loading-indicator"></div>\n    </div>\n    <div data-ng-if="!loaders.page">\n        <div class="recipe-jumbotron" imgur-loader="{{recipe.url}}" auto-watch="true">\n            <div class="form-group row">\n                <div class="col-sm-2"></div>\n                <div class="form-inline col-sm-8">\n                    <div class="back-{{color.name}} color-select"\n                         data-ng-repeat="color in colors track by $index"\n                         data-ng-click="recipe.color = color.name"\n                         data-ng-class="{selected : color.name == recipe.color }">\n                    </div>\n                </div>\n                <div class="col-sm-2"></div>\n            </div>\n            <div class="form-group row">\n                <div class="col-sm-2"></div>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control" id="url" name="tbUrl" placeholder="Image url"\n                           ng-model="recipe.url">\n                </div>\n                <div class="col-sm-2"></div>\n            </div>\n            <div class="form-group row">\n                <div class="col-sm-2"></div>\n                <div class="col-sm-8">\n                    <input type="text" class="form-control" id="name" name="tbName" placeholder="Recipe name"\n                           ng-class="hasError(\'tbName\', \'recipe\')"\n                           ng-model="recipe.title" required>\n                </div>\n                <div class="col-sm-2"></div>\n            </div>\n        </div>\n        <div class="recipe-jumbotron textAlignLeft">\n            <div class="form-inline form-group row">\n                <div class="input-group col-sm-3 marginBottom1em">\n                    <ff-icon class="{{ \'back-\' + recipe.color }} input-group-addon" icon="\'MIT\'"></ff-icon>\n                    <input class="form-control" name="tbMethod" ng-model="recipe.method"\n                           ng-class="hasError(\'tbMethod\', \'recipe\')"\n                           placeholder="Method" required>\n                </div>\n                <div class="input-group col-sm-3 marginBottom1em">\n                    <ff-icon class="{{ \'back-\' + recipe.color }} input-group-addon" icon="\'UTIL\'"></ff-icon>\n                    <input class="form-control" name="tbPrep" ng-model="recipe.prep"\n                           ng-class="hasError(\'tbPrep\', \'recipe\')"\n                           placeholder="Prep" required>\n                </div>\n                <div class="input-group col-sm-3 marginBottom1em">\n                    <ff-icon class="{{ \'back-\' + recipe.color }} input-group-addon" icon="\'CLOCK\'"></ff-icon>\n                    <input class="form-control" name="tbMinutes"\n                           ng-class="hasError(\'tbMinutes\', \'recipe\')"\n                           ng-model="recipe.minutes" placeholder="Minutes" required>\n                </div>\n                <div class="input-group col-sm-3 marginBottom1em">\n                    <ff-icon class="{{ \'back-\' + recipe.color }} input-group-addon" icon="\'SERVE\'"></ff-icon>\n                    <input class="form-control" name="tbServes"\n                           ng-class="hasError(\'tbServes\', \'recipe\')"\n                           ng-model="recipe.serves" placeholder="Serves" required>\n                </div>\n            </div>\n        </div>\n        <div class="container" style="padding-top: 1em">\n            <div class="row">\n                <div class="col-md-6">\n                    <ng-form name="forms.ingredients" class="container" novalidate>\n                        <div class="row">\n                            <div class="col-sm-3 marginBottom1em">\n                                <input onclick="this.select()" name="tbAmount" class="form-control"\n                                       placeholder="Amount" required\n                                       ng-class="hasError(\'tbAmount\', \'ingredients\')"\n                                       data-ng-model="selectedIngredient.amount">\n                            </div>\n                            <div class="col-sm-2 marginBottom1em">\n                                <ff-icon class="form-control ingredient-pick clicker highlight"\n                                         data-ng-click="picker.open(selectedIngredient)"\n                                         icon="selectedIngredient.ingredientTag">\n                                </ff-icon>\n                            </div>\n                            <div class="col-sm-5 marginBottom1em" ng-class="hasError(\'tbName\', \'ingredients\', \'has-input-error\')">\n                                <ff-autosuggest trigger-length="0" placeholder="Name"\n                                                name="tbName"\n                                                search-term="selectedIngredient.name"\n                                                required="true"\n                                                on-select="ingredientActions.select(item)"\n                                                on-search="ingredientActions.search(searchTerm)">\n                                    <ff-icon icon="item.tag" size="small"></ff-icon>&nbsp;\n                                    <div class="displayInlineBlock">{{item.name}}</div>\n                                </ff-autosuggest>\n                            </div>\n                            <div class="col-sm-2 marginBottom1em">\n                                <button type="button" class="btn {{ \'back-\' + recipe.color }} width100Percent"\n                                        ng-click="ingredientActions.add()"\n                                        style="padding: 10px">\n                                    <i class="fa fa-plus-circle font-white" aria-hidden="true"></i>\n                                </button>\n                            </div>\n                            <div class="col-md-12">\n                                <textarea class="form-control form-group width100Percent" name="tbInstructions" ng-model="recipeUtil.ingredientsPaste"\n                                ng-class="hasError(\'tbInstructions\', \'recipe\')" ng-paste="paste($event)"\n                                placeholder="Paste Ingredient Info..." rows="5" ></textarea>\n                            </div>\n                        </div>\n\n\n\n                    </ng-form>\n                    <div class="container form-group">\n                    <div class="row">\n                        <div class="col-md-12">\n                            <div data-ng-if="recipe.ingredients.length > 0"\n                                 class="form-control {{\'back-\' + recipe.color }}">\n                                <table>\n                                    <tbody>\n                                        <tr class="font-white" data-ng-repeat="i in recipe.ingredients track by $index">\n                                            <td><input onclick="this.select()" class="subtle-input clicker highlight"\n                                                       data-ng-model="i.amount"></td>\n                                            <td>\n                                                <ff-icon data-ng-click="picker.open(i)"\n                                                         class="clicker highlight md-icon"\n                                                         icon="i.ingredientTag"\n                                                         style="margin-left:0">\n                                                </ff-icon>\n                                            </td>\n                                            <td><input onclick="this.select()" class="subtle-input clicker highlight"\n                                                       data-ng-model="i.name"></td>\n                                            <td>\n                                                <div>\n                                                    <i class="fa fa-arrow-up highlight"\n                                                       data-ng-click="ingredientActions.move($index, $index - 1)"\n                                                       aria-hidden="true"></i>\n                                                    <i class="fa fa-arrow-down highlight"\n                                                       data-ng-click="ingredientActions.move($index, $index + 1)"\n                                                       aria-hidden="true"></i>\n                                                </div>\n                                            </td>\n                                            <td>\n                                                <i class="fa fa-minus-square highlight"\n                                                   aria-hidden="true"\n                                                   data-ng-click="ingredientActions.remove(i)">\n                                                </i>\n                                            </td>\n                                        </tr>\n                                    </tbody>\n                                </table>\n                            </div>\n                        </div>\n                    </div>\n                    </div>\n                </div>\n                <div class="col-md-6">\n                    <textarea class="form-control form-group" name="tbInstructions" ng-model="recipe.instructions"\n                              ng-class="hasError(\'tbInstructions\', \'recipe\')"\n                              placeholder="Instructions" rows="25" required></textarea>\n                    <button data-ng-if="::isEdit" type="button" class="btn btn-outline-danger" ng-click="showChickenMessage()">\n                        <i class="fa fa-trash-o" aria-hidden="true"></i>&nbsp;Delete\n                    </button>\n                    <button data-ng-click="recipeActions.submit()" class="pull-right btn btn-outline-success" type="button">\n                        <i class="fa fa-check" aria-hidden="true"></i>&nbsp;{{::(isEdit ? \'Save\' : \'Create\')}}\n                    </button>\n                </div>\n            </div>\n            <ingredient-picker controls="picker"\n                               ingredients="ingredients">\n            </ingredient-picker>\n        </div>\n    </div>\n</form>\n<div id="chickenModal" class="modal fade bd-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">\n    <div class="modal-dialog modal-sm">\n        <div class="modal-content">\n            <div class="modal-header">\n                <h5 class="modal-title">WARNING</h5>\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                    <span aria-hidden="true">&times;</span>\n                </button>\n            </div>\n            <div class="modal-body">\n                <p>Are you sure you want to delete this recipe?</p>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-outline-danger" data-dismiss="modal">No!</button>\n                <button type="button" class="btn btn-outline-primary" data-ng-click="recipeActions.delete()">Yes</button>\n            </div>\n        </div>\n    </div>\n</div>')}]),angular.module("home/home.html",[]).run(["$templateCache",function(a){a.put("home/home.html",'<div data-ng-if="!loaders.page" class="row" style="margin: 0">\n    <div class="nav nav-tabs" id="nav-tab" role="tablist">\n        <a class="nav-item nav-link active" ng-class="{active: selected==\'Recent\'}" ng-click="getRecipes(\'Recent\')" aria-controls="nav-home" aria-selected="true">Recent</a>\n        <a class="nav-item nav-link" ng-class="{active: selected==\'Meals\'}" ng-click="getRecipes(\'Meals\')" aria-controls="nav-home" aria-selected="true">Meals</a>\n        <a class="nav-item nav-link" ng-class="{active: selected==\'Desserts\'}" ng-click="getRecipes(\'Desserts\')" aria-controls="nav-profile" aria-selected="false">Desserts</a>\n        \x3c!--<a class="nav-item nav-link"  ng-class="{active: selected==\'By Ingredient\'}" ng-click="getRecipes(\'By Ingredient\')" aria-controls="nav-contact" aria-selected="false">By Ingredient</a>--\x3e\n    </div>\n    <div class="col-md-12 padding18px backgroundWhite">\n        <recipe-list style="margin-left: -4px" recipes="filteredRecipes" search-text="$root.searchText" authorized-function="$root.authorized"></recipe-list>\n    </div>\n</div>\n<div data-ng-if="loaders.page">\n    <div class="loading-indicator"></div>\n</div>')}]),angular.module("index.html",[]).run(["$templateCache",function(a){a.put("index.html",'<html lang="en" ng-app="foodfiddler" ng-controller="FoodFiddlerCtrl">\n<head>\n    <meta name="viewport" content="width=device-width, initial-scale=1">\n    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">\n    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css"\n          integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">\n\n    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"><\/script>\n    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"><\/script>\n    <link href="https://fonts.googleapis.com/css?family=Quicksand" rel="stylesheet">\n    <link rel="icon" type="image/png" href="https://i.imgur.com/PxqL7Pj.png">\n    <link href="common/data/fonts/generated/iconfont.css?rel=8eb36ed043" rel="stylesheet">\n    <link href="foodfiddler.css?rel=7ca3cc6bfc" rel="stylesheet"/>\n</head>\n<style>\n    body, .body-content {\n        font-family: \'Quicksand\', sans-serif;\n        color: #6C6D70;\n        background: url(\'https://subtlepatterns.com/patterns/asanoha-400px.png\');\n    }\n</style>\n<body ng-cloak>\n<div>\n<nav class="navbar fixed-top navbar-toggleable-md navbar-light bg-faded" style="padding: 0;">\n    <div class="navbar-collapse" id="navbarSupportedContent">\n        <div class="brand-wrapper">\n            <a class="navbar-brand" href="#"><b>food</b>fiddler</a>\n            <div class="nav-search">\n                <label id="search-label" for="search-input"><i class="fa fa-search" aria-hidden="true"></i><span class="sr-only">Search icons</span></label>\n                <ff-autosuggest trigger-length="2"\n                                placeholder="recipes..."\n                                search-term="$root.searchText"\n                                on-select="select(item)"\n                                empty-on-blur="true"\n                                on-search="search(searchTerm)">\n                    <div class="displayInlineBlock">{{item.title | ffTitleCase}}</div>\n                </ff-autosuggest>\n            </div>\n        </div>\n        <ul class="navbar-nav mr-auto">\n            <li class="nav-item" ng-class="{active : isSelected(\'home\')}">\n                <a class="nav-link" href="#/home">\n                    <i class="fa fa-home" aria-hidden="true"></i>\n                    <span class="nav-text">HOME</span>\n                    <span data-ng-if="isSelected(\'home\')" class="sr-only">(current)</span>\n                </a>\n            </li>\n            <li class="nav-item" ng-class="{active : isSelected(\'add\')}" data-ng-if="isAdmin()">\n                <a class="nav-link" href="#/add/">\n                    <i class="fa fa-utensils" aria-hidden="true"></i>\n                    <span class="nav-text">CREATE</span>\n                    <span data-ng-if="isSelected(\'add\')" class="sr-only">(current)</span>\n                </a>\n            </li>\n        </ul>\n        <ul class="nav navbar-nav right-nav">\n            <li class="nav-item">\n                <a class="nav-link dropdown-toggle" id="accountDropdown"\n                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n                    <i class="fa fa-user-circle" aria-hidden="true"></i>\n                    <span class="nav-text">{{$root.user.displayName}}</span>\n                </a>\n                <div class="dropdown-menu" aria-labelledby="accountDropdown">\n                    <a ng-if="$root.user.loggedIn" class="dropdown-item" href="#/settings">\n                        Settings\n                    </a>\n                    <a class="dropdown-item" data-ng-click="decideAction()">\n                        {{$root.user.loggedIn ? \'Sign out\' : \'Login\'}}\n                    </a>\n                </div>\n            </li>\n        </ul>\n    </div>\n</nav>\n\n<div class="body-content">\n    <div class="container recipe-container padding18px" style="border-radius: 0;">\n        <div ng-view autoscroll="true"></div>\n    </div>\n</div>\n</div>\n<script src="https://www.gstatic.com/firebasejs/5.9.4/firebase-app.js?rel=7cc7a25676"><\/script>\n<script src="https://www.gstatic.com/firebasejs/5.9.4/firebase-auth.js"><\/script>\n<script src="https://www.gstatic.com/firebasejs/5.9.4/firebase-database.js"><\/script>\n<script>\n    // Initialize Firebase\n    var config = {\n        apiKey: "AIzaSyBJkpxrOHdLy77wkshCeYuVSSUVSM-H6xA",\n        authDomain: "foodfiddler.firebaseapp.com",\n        databaseURL: "https://foodfiddler.firebaseio.com",\n        storageBucket: "foodfiddler.appspot.com",\n        messagingSenderId: "439145630216"\n    };\n    firebase.initializeApp(config);\n<\/script>\n\n<script src="https://code.jquery.com/jquery-3.1.1.slim.min.js"\n        integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n"\n        crossorigin="anonymous"><\/script>\n<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"\n        integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb"\n        crossorigin="anonymous"><\/script>\n<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js"\n        integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn"\n        crossorigin="anonymous"><\/script>\n\n<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular.min.js"><\/script>\n<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-animate.min.js"><\/script>\n<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-aria.min.js"><\/script>\n<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-messages.min.js"><\/script>\n\n<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-route.min.js"><\/script>\n<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-sanitize.min.js"><\/script>\n\n\x3c!-- replace with app.js start --\x3e\n<script src="foodfiddler.js"><\/script>\n<script src="common/filters/ff-number.js"><\/script>\n<script src="common/filters/ff-title-case.js"><\/script>\n<script src="common/filters/filters.js"><\/script>\n<script src="common/services/util.js"><\/script>\n<script src="common/services/http-util.js"><\/script>\n<script src="common/services/lazy-loader.js"><\/script>\n<script src="common/services/recipes.js"><\/script>\n<script src="common/services/tags.js"><\/script>\n<script src="common/services/auth.js"><\/script>\n<script src="common/directives/recipe-list/recipe-list.directive.js"><\/script>\n<script src="common/directives/ingredient-picker/ingredient-picker.directive.js"><\/script>\n<script src="home/home.controller.js"><\/script>\n<script src="recipes/recipe.controller.js"><\/script>\n<script src="edit/edit-recipe.controller.js"><\/script>\n<script src="common/directives/ingredient-list/ingredient-list.directive.js"><\/script>\n<script src="common/directives/imgur-loader.js"><\/script>\n<script src="common/directives/angulargrid.js"><\/script>\n<script src="common/directives/autosuggest/ff-autosuggest.directive.js"><\/script>\n<script src="common/directives/ff-icon.js"><\/script>\n<script src="common/directives/recipe-preview/recipe-preview.directive.js"><\/script>\n<script src="settings/settings.directive.js"><\/script>\n<script src="settings/tags/tags.directive.js"><\/script>\n\x3c!-- replace with app.js end --\x3e\n\n</body>\n</html>')}]),angular.module("recipes/recipe.html",[]).run(["$templateCache",function(a){a.put("recipes/recipe.html",'<div data-ng-if="!recipe">\n    <div class="loading-indicator"></div>\n</div>\n<div data-ng-if="recipe">\n    \x3c!--<div style="left: 3%;margin-top: 1%; position: absolute; z-index:999; color:white">--\x3e\n        \x3c!--<div class="displayInlineBlock" style="margin-right: 6px" ng-repeat="tag in recipe.tags track by $index">{{tag.name}}</div>--\x3e\n    \x3c!--</div>--\x3e\n    <div class="float-btn"\n         data-ng-if="$root.authorized()" data-ng-click="editRecipe()"\n         style="right: 3%;margin-top: 1%;">\n        <i class="fa fa-pencil-square-o" aria-hidden="true"></i>Edit\n    </div>\n    <div class="{{ ::(\'back-\' + recipe.color) }} recipe-jumbotron jumbo-image-wrapper">\n        <div class="jumbo-image" max="true" imgur-loader="{{recipe.url}}"></div>\n        <div class="jumbo-image-title-wrapper">\n            <span class="jumbo-image-title">{{::recipe.title}}</span>\n        </div>\n    </div>\n    <div class="recipe-jumbotron">\n        <div class="marginLeftRight10Percent">\n            <div class="row">\n                <div class="col-3">\n                    <ff-icon icon="\'MIT\'" color="recipe.color" class="lg-icon"></ff-icon>\n                    <div class="desc-text">METHOD</div>\n                    <div class="sub-text">{{::recipe.method}}</div>\n                </div>\n                <div class="col-3">\n                    <ff-icon icon="\'UTIL\'" color="recipe.color" class="lg-icon"></ff-icon>\n                    <div class="desc-text">PREP</div>\n                    <div class="sub-text">{{::recipe.prep}}</div>\n                </div>\n                <div class="col-3">\n                    <ff-icon icon="\'CLOCK\'" color="recipe.color" class="lg-icon"></ff-icon>\n                    <div class="desc-text">MINUTES</div>\n                    <div class="sub-text">{{::recipe.minutes}}</div>\n                </div>\n                <div class="col-3">\n                    <ff-icon icon="\'SERVE\'" color="recipe.color" class="lg-icon"></ff-icon>\n                    <div class="desc-text">SERVES</div>\n                    <div class="sub-text">{{::recipe.serves}}</div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="row page" style="margin: 0">\n        <div class="col-md-4">\n            <ingredient-list color="recipe.color" ingredients="recipe.ingredients"></ingredient-list>\n        </div>\n        <div class="col-md-8">\n            <div class="instruction-container bold">\n                <div style="word-wrap: break-word;" ng-bind-html="recipe.instructions"></div>\n            </div>\n        </div>\n    </div>\n</div>')}]),angular.module("settings/settings.html",[]).run(["$templateCache",function(a){a.put("settings/settings.html",'<div>\n<h2>Settings</h2>\n<p>Secret place to adjust admin panel things</p>\n</div>\n<div class="row">\n    <div class="col-12">\n        <div class="list-group horizontal">\n            <a class="list-group-item list-group-item-action"\n               ng-click="select(\'tags\')"\n               ng-class="{active: isSelected(\'tags\')}">\n                Tags\n            </a>\n            <a class="list-group-item list-group-item-action">\n                Colors\n            </a>\n            <a class="list-group-item list-group-item-action">\n                Methods\n            </a>\n        </div>\n    </div>\n</div>\n<div class="row">\n    <div class="col-12">\n        <ff-tags ng-if="isSelected(\'tags\')"></ff-tags>\n    </div>\n</div>\n')}]),angular.module("settings/tags/tags.html",[]).run(["$templateCache",function(a){a.put("settings/tags/tags.html",'<div>\n    <div class="alert alert-{{controls.alertType}}" role="alert">\n        {{controls.alertText}}\n    </div>\n    <table class="table">\n        <thead>\n            <tr>\n                <th>ID</th>\n                <th>Name</th>\n                <th>Recipes</th>\n                <th colspan="2"></th>\n            </tr>\n        </thead>\n        <tbody>\n            <tr>\n                <td></td>\n                <td><input class="form-control" ng-model="controls.newTag.name"/> </td>\n                <td></td>\n                <td><button class="btn btn-success" ng-click="createTag(controls.newTag)">Create</button></td>\n                <td></td>\n            </tr>\n            <tr ng-repeat="tag in tags track by $index">\n                <td>{{tag.id}}</td>\n                <td><input class="form-control" ng-model="tag.name"/></td>\n                <td>\n                    <div ng-repeat="(key, value) in tag.recipes">\n                        <a target="_blank" href="#/recipe/{{key}}">{{key}}</a>\n                    </div>\n                </td>\n                <td><button class="btn btn-danger" ng-click="deleteTag(tag)" type="button">Delete</button></td>\n                <td><button class="btn btn-primary" ng-click="updateTag(tag)" type="button">Update</button></td>\n            </tr>\n        </tbody>\n    </table>\n</div>')}]);